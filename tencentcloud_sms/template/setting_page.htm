<!--
 Copyright (C) 2020 Tencent Cloud.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<style type="text/css">
    input[disabled] {
        background-color: gainsboro;
    }
</style>
<form action="admin.php?action=plugins&operation=config&do={$pluginid}&identifier=tencentcloud_sms&pmod=setting_page" method="post">
    <table class="tb tb2">
        <tbody>
        <tr>
            <th colspan="15" class="partition">参数设置</th>
        </tr>
        <tr>
            <td colspan="2" class="td27">自定义密钥:</td>
        </tr>
        <tr class="noborder">
            <td class="vtop rowform">
                <ul>
                    <li <!--{if $customKey === 1 }-->class="checked" <!--{/if}--> ><input <!--{if $customKey === 1 }-->checked="checked" <!--{/if}--> id="custom-key" class="radio" type="radio" name="customKey" value="1"><label for="custom-key">是</label></li>
                    <li <!--{if $customKey === 0 }-->class="checked" <!--{/if}--> ><input <!--{if $customKey === 0 }-->checked="checked" <!--{/if}--> class="radio" id="global-key" type="radio" name="customKey" value="0"><label for="global-key">否</label></li>
                </ul>
            </td>
            <td class="vtop tips2">为该插件配置单独定义的腾讯云密钥</td>
        </tr>
        <tr>
            <td colspan="2" class="td27" ><label for="secret-id">SecretId:</label></td>
        </tr>
        <tr class="noborder">
            <td class="vtop rowform">
                <input id="secret-id" name="secretId" size="42" type="text" class="text" value="{$secretId}">
            </td>
            <td class="vtop tips2">SecretId</td>
        </tr>
        <tr>
            <td colspan="2" class="td27"><label for="secret-key">SecretKey:</label></td>
        </tr>
        <tr class="noborder">
            <td class="vtop rowform">
                <input name="secretKey" size="42" id="secret-key" type="text" class="text" value="{$secretKey}">
            </td>
            <td class="vtop tips2">访问<a href="https://console.qcloud.com/cam/capi" target="_blank">密钥管理</a>获取
                SecretId和SecretKey或通过"新建密钥"创建密钥串</td>
        </tr>

        <tr>
            <td colspan="2" class="td27"><label for="sdk-app-id">SDKAppID:</label></td>
        </tr>
        <tr class="noborder">
            <td class="vtop rowform">
                <input name="SDKAppID" size="42" id="sdk-app-id" type="text" class="text" value="{$SDKAppID}">
            </td>
            <td class="vtop tips2">访问<a href="https://console.cloud.tencent.com/smsv2/app-manage" target="_blank">应用列表</a>获取SDKAppID或通过"创建应用"创建SDKAppID</td>
        </tr>

        <tr>
            <td colspan="2" class="td27"><label for="sign">短信签名:</label></td>
        </tr>
        <tr class="noborder">
            <td class="vtop rowform">
                <input name="sign" size="42" id="sign" type="text" class="text" value="{$sign}">
            </td>
            <td class="vtop tips2">审核通过的短信签名，不包含【】</td>
        </tr>

        <tr>
            <td colspan="2" class="td27"><label for="template-id">模板ID:</label></td>
        </tr>
        <tr class="noborder">
            <td class="vtop rowform">
                <input name="templateId" size="42" id="template-id" type="text" class="text" value="{$templateId}">
            </td>
            <td class="vtop tips2">审核通过的模板ID</td>
        </tr>

        <tr>
            <td colspan="2" class="td27"><label for="code-expired">验证码有效时间:</label></td>
        </tr>
        <tr class="noborder">
            <td class="vtop rowform">
                <input name="codeExpired" size="42" id="code-expired" type="text" class="text" value="{$codeExpired}">
            </td>
            <td class="vtop tips2">单位：分钟，默认5。范围【1-360】</td>
        </tr>

        <tr>
            <td colspan="2" class="td27">模板包含过期时间:</td>
        </tr>
        <tr class="noborder">
            <td class="vtop rowform">
                <ul>
                    <li <!--{if $hasExpireTime === 1 }-->class="checked" <!--{/if}--> ><input <!--{if $hasExpireTime === 1 }-->checked="checked" <!--{/if}--> id="has-expired-time" class="radio" type="radio" name="hasExpiredTime" value="1"><label for="has-expired-time">是</label></li>
                    <li <!--{if $hasExpireTime === 0 }-->class="checked" <!--{/if}--> ><input <!--{if $hasExpireTime === 0 }-->checked="checked" <!--{/if}--> class="radio" id="has-not-expired-time" type="radio" name="hasExpiredTime" value="0"><label for="has-not-expired-time">否</label></li>
                </ul>
            </td>
            <td class="vtop tips2">请与模板中参数个数保持一致，否则将导致短信发送失败</td>
        </tr>

        <tr>
            <td colspan="2" class="td27">发帖需要绑定手机号:</td>
        </tr>
        <tr class="noborder">
            <td class="vtop rowform">
                <ul>
                    <li <!--{if $postNeedPhone === 1 }-->class="checked" <!--{/if}--> ><input <!--{if $postNeedPhone === 1 }-->checked="checked" <!--{/if}--> id="post-need-phone" class="radio" type="radio" name="postNeedPhone" value="1"><label for="post-need-phone">是</label></li>
                    <li <!--{if $postNeedPhone === 0 }-->class="checked" <!--{/if}--> ><input <!--{if $postNeedPhone === 0 }-->checked="checked" <!--{/if}--> class="radio" id="post-not-need-phone" type="radio" name="postNeedPhone" value="0"><label for="post-not-need-phone">否</label></li>
                </ul>
            </td>
            <td class="vtop tips2">未绑定手机号的账号是否可以发帖</td>
        </tr>

        <tr>
            <td colspan="2" class="td27">回帖需要绑定手机号:</td>
        </tr>
        <tr class="noborder">
            <td class="vtop rowform">
                <ul>
                    <li <!--{if $commentNeedPhone === 1 }-->class="checked" <!--{/if}--> ><input <!--{if $commentNeedPhone === 1 }-->checked="checked" <!--{/if}--> id="reply-need-phone" class="radio" type="radio" name="replyNeedPhone" value="1"><label for="reply-need-phone">是</label></li>
                    <li <!--{if $commentNeedPhone === 0 }-->class="checked" <!--{/if}--> ><input <!--{if $commentNeedPhone === 0 }-->checked="checked" <!--{/if}--> class="radio" id="reply-not-need-phone" type="radio" name="replyNeedPhone" value="0"><label for="reply-not-need-phone">否</label></li>
                </ul>
            </td>
            <td class="vtop tips2">未绑定手机号的账号是否可以回帖</td>

        </tr>

        <tr>
            <td colspan="15">
                <div class="fixsel">
                    <input type="submit" class="btn"  id="txc-submit-btn" value="保存" />
                </div>
            </td>
        </tr>
        </tbody>
    </table>
</form>
<div style="text-align: center;flex: 0 0 auto;margin-top: 3rem;">
    <a href="https://openapp.qq.com/docs/DiscuzX/sms.html" target="_blank">文档中心</a> | <a href="https://github.com/Tencent-Cloud-Plugins/tencentcloud-discuzx-plugin-sms" target="_blank">GitHub</a> | <a
        href="https://support.qq.com/product/164613" target="_blank">意见反馈</a>
</div>
<script src="source/plugin/tencentcloud_sms/js/jquery.min.js"></script>
<script type="text/javascript">
    jQuery.noConflict();
    jQuery(function($){
        function changeDisable(type){
            $("#secret-key").attr("disabled",type);
            $("#secret-id").attr("disabled",type);
        }
        function initStatus(){
            var status = $("#global-key").attr('checked');
            if (status) {
                changeDisable(true);
            }
        }
        initStatus();

        $("#custom-key").change(function () {
            $(this).parent().addClass('checked');
            $("#global-key").parent().removeClass('checked');
            changeDisable(false);
        });

        $("#global-key").change(function () {
            $(this).parent().addClass('checked');
            $("#custom-key").parent().removeClass('checked');
            changeDisable(true);
        });

        $("#has-expired-time").change(function () {
            $(this).parent().addClass('checked');
            $("#has-not-expired-time").parent().removeClass('checked');
        });

        $("#has-not-expired-time").change(function () {
            $(this).parent().addClass('checked');
            $("#has-expired-time").parent().removeClass('checked');
        });

        $("#post-not-need-phone").change(function () {
            $(this).parent().addClass('checked');
            $("#post-need-phone").parent().removeClass('checked');
        });

        $("#post-need-phone").change(function () {
            $(this).parent().addClass('checked');
            $("#post-not-need-phone").parent().removeClass('checked');
        });

        $("#reply-need-phone").change(function () {
            $(this).parent().addClass('checked');
            $("#reply-not-need-phone").parent().removeClass('checked');
        });

        $("#reply-not-need-phone").change(function () {
            $(this).parent().addClass('checked');
            $("#reply-need-phone").parent().removeClass('checked');
        });


    });
</script>